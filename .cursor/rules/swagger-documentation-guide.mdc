---
description:
globs:
alwaysApply: false
---
# Swagger API ë¬¸ì„œí™” ê°€ì´ë“œ

## ğŸš¨ ì¤‘ìš”: ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ ì‹œ Swagger ë¬¸ì„œ í•„ìˆ˜

### 1. Swagger ë¬¸ì„œ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•œ ê²½ìš°

#### âœ… ë°˜ë“œì‹œ Swagger ë¬¸ì„œë¥¼ ì‘ì„±í•´ì•¼ í•˜ëŠ” ìƒí™©ë“¤
- [ ] ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
- [ ] ê¸°ì¡´ APIì˜ ìš”ì²­/ì‘ë‹µ êµ¬ì¡° ë³€ê²½
- [ ] ìƒˆ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë‚˜ ê²½ë¡œ íŒŒë¼ë¯¸í„° ì¶”ê°€
- [ ] ì—ëŸ¬ ì‘ë‹µ ì½”ë“œ ì¶”ê°€/ë³€ê²½

### 2. Swagger ë¬¸ì„œ ì‘ì„± íŒ¨í„´

#### âœ… í‘œì¤€ JSDoc íŒ¨í„´ ([routes/](mdc:backend/src/routes/))
```javascript
/**
 * @swagger
 * /api/endpoint-path:
 *   post:
 *     summary: ê°„ë‹¨í•œ ì„¤ëª…
 *     description: ìƒì„¸í•œ ì„¤ëª…
 *     tags: [TagName]
 *     security:
 *       - bearerAuth: []  # ì¸ì¦ í•„ìš”í•œ ê²½ìš°
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             properties:
 *               field1:
 *                 type: string
 *                 description: í•„ë“œ ì„¤ëª…
 *     responses:
 *       200:
 *         description: ì„±ê³µ ì‘ë‹µ
 *       401:
 *         description: ì¸ì¦ í•„ìš”
 */
```

### 3. ì‹¤ì œ ì˜ˆì‹œë“¤

#### âœ… ìœ ë£Œ ì¶”ì²œ íŒŒë¼ë¯¸í„° ì¤€ë¹„ API
```javascript
/**
 * @swagger
 * /api/recommend/prepare:
 *   post:
 *     summary: ìœ ë£Œ ì¶”ì²œ íŒŒë¼ë¯¸í„° ì¤€ë¹„
 *     description: ê²°ì œ ì „ì— ì¶”ì²œ íŒŒë¼ë¯¸í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤
 *     tags: [Recommendations]
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             properties:
 *               type:
 *                 type: string
 *                 enum: [PREMIUM]
 *                 default: PREMIUM
 *               gameCount:
 *                 type: integer
 *                 minimum: 1
 *                 maximum: 10
 *                 default: 5
 *     responses:
 *       200:
 *         description: íŒŒë¼ë¯¸í„° ì €ì¥ ì„±ê³µ
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                 data:
 *                   type: object
 *                   properties:
 *                     paramId:
 *                       type: string
 *       401:
 *         description: ì¸ì¦ í•„ìš”
 */
```

#### âœ… ê²½ë¡œ íŒŒë¼ë¯¸í„°ê°€ ìˆëŠ” API
```javascript
/**
 * @swagger
 * /api/recommend/generate-from-order/{orderId}:
 *   post:
 *     summary: ê²°ì œ ì™„ë£Œ í›„ ì¶”ì²œë²ˆí˜¸ ìƒì„±
 *     tags: [Recommendations]
 *     security:
 *       - bearerAuth: []
 *     parameters:
 *       - in: path
 *         name: orderId
 *         required: true
 *         schema:
 *           type: string
 *         description: ì£¼ë¬¸ ID
 *     responses:
 *       200:
 *         description: ì¶”ì²œë²ˆí˜¸ ìƒì„± ì„±ê³µ
 *       404:
 *         description: ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
 */
```

### 4. Swagger ë¬¸ì„œ ê²€ì¦ ë°©ë²•

#### âœ… ë¬¸ì„œê°€ ì œëŒ€ë¡œ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸
```bash
# 1. ì„œë²„ ì¬ë¹Œë“œ í›„ í™•ì¸
docker-compose down && docker-compose up -d --build

# 2. OpenAPI JSONì—ì„œ ìƒˆ ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
curl -s http://localhost:3350/openapi.json | jq '.paths | keys' | grep "ìƒˆë¡œìš´ì—”ë“œí¬ì¸íŠ¸"

# 3. Swagger UIì—ì„œ ì§ì ‘ í™•ì¸
# http://localhost:3350/api-docs ì ‘ì†
```

#### âœ… íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ ë¬¸ì„œ ìƒì„¸ í™•ì¸
```bash
# íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ì˜ ìŠ¤ì›¨ê±° ë¬¸ì„œ í™•ì¸
curl -s http://localhost:3350/openapi.json | jq '.paths."/api/recommend/prepare".post'
```

### 5. ìì£¼ ì‚¬ìš©í•˜ëŠ” Swagger íŒ¨í„´ë“¤

#### âœ… ì¸ì¦ì´ í•„ìš”í•œ API
```yaml
security:
  - bearerAuth: []  # JWT í† í° í•„ìš”
```

#### âœ… ë°°ì—´ ì‘ë‹µ
```yaml
responses:
  200:
    content:
      application/json:
        schema:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
```

#### âœ… ì—´ê±°í˜•(enum) ì‚¬ìš©
```yaml
type:
  type: string
  enum: [FREE, PREMIUM]
  description: ì¶”ì²œ íƒ€ì…
```

#### âœ… ì¤‘ì²© ê°ì²´
```yaml
conditions:
  type: object
  properties:
    excludeNumbers:
      type: array
      items:
        type: integer
        minimum: 1
        maximum: 45
    includeNumbers:
      type: array
      items:
        type: integer
        minimum: 1
        maximum: 45
```

### 6. ê³µí†µ ì‘ë‹µ íŒ¨í„´

#### âœ… í‘œì¤€ ì„±ê³µ ì‘ë‹µ
```yaml
responses:
  200:
    description: ì„±ê³µ
    content:
      application/json:
        schema:
          type: object
          properties:
            success:
              type: boolean
            data:
              type: object
              # ì‹¤ì œ ë°ì´í„° êµ¬ì¡°
            message:
              type: string
            timestamp:
              type: string
              format: date-time
```

#### âœ… í‘œì¤€ ì˜¤ë¥˜ ì‘ë‹µë“¤
```yaml
responses:
  400:
    description: ì˜ëª»ëœ ìš”ì²­
  401:
    description: ì¸ì¦ í•„ìš”
  403:
    description: ê¶Œí•œ ì—†ìŒ
  404:
    description: ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
  500:
    description: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
```

### 7. Tags ë¶„ë¥˜ ê·œì¹™

#### âœ… ì´ í”„ë¡œì íŠ¸ì˜ íƒœê·¸ ë¶„ë¥˜
- `Authentication` - ì¸ì¦ ê´€ë ¨ ([authRoutes.ts](mdc:backend/src/routes/authRoutes.ts))
- `Recommendations` - ì¶”ì²œë²ˆí˜¸ ê´€ë ¨ ([recommendationRoutes.ts](mdc:backend/src/routes/recommendationRoutes.ts))
- `Payment` - ê²°ì œ ê´€ë ¨ ([paymentRoutes.ts](mdc:backend/src/routes/paymentRoutes.ts))
- `Reviews` - íšŒê³  ê´€ë ¨ ([reviewRoutes.ts](mdc:backend/src/routes/reviewRoutes.ts))
- `Data` - ë°ì´í„° ì¡°íšŒ ([dataRoutes.ts](mdc:backend/src/routes/dataRoutes.ts))
- `Board` - ê²Œì‹œíŒ ([boardRoutes.ts](mdc:backend/src/routes/boardRoutes.ts))
- `Admin` - ê´€ë¦¬ì ([adminRoutes.ts](mdc:backend/src/routes/adminRoutes.ts))

### 8. Swagger ë¬¸ì„œ ì—…ë°ì´íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### âœ… ìƒˆ API ì¶”ê°€ ì‹œ í•„ìˆ˜ ì²´í¬
- [ ] JSDoc í˜•íƒœì˜ Swagger ì£¼ì„ ì‘ì„±
- [ ] ìš”ì²­ ìŠ¤í‚¤ë§ˆ ì •ì˜ (requestBody)
- [ ] ì‘ë‹µ ìŠ¤í‚¤ë§ˆ ì •ì˜ (responses)
- [ ] ì ì ˆí•œ íƒœê·¸ ë¶„ë¥˜
- [ ] ì¸ì¦ í•„ìš” ì—¬ë¶€ ëª…ì‹œ
- [ ] ì˜ˆì‹œ ê°’ í¬í•¨ (example)
- [ ] ì—ëŸ¬ ì¼€ì´ìŠ¤ë³„ ì‘ë‹µ ì½”ë“œ ì •ì˜

#### âœ… ë¹Œë“œ í›„ ê²€ì¦
- [ ] TypeScript ë¹Œë“œ ì„±ê³µ
- [ ] Docker ì¬ë¹Œë“œ ì„±ê³µ
- [ ] OpenAPI JSONì— ì—”ë“œí¬ì¸íŠ¸ ë“±ë¡ í™•ì¸
- [ ] Swagger UIì—ì„œ ë¬¸ì„œ í™•ì¸
- [ ] API í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê°€ëŠ¥ í™•ì¸

## ğŸš¨ Swagger ë¬¸ì„œ ê´€ë ¨ í”í•œ ì‹¤ìˆ˜ë“¤

### âŒ ì‹¤ìˆ˜ 1: Swagger ì£¼ì„ ëˆ„ë½
```javascript
// ì˜ëª»ëœ ì˜ˆ: Swagger ì£¼ì„ ì—†ì´ ë¼ìš°íŠ¸ë§Œ ë“±ë¡
router.post('/new-endpoint', controller.newMethod);
```

**âœ… ì˜¬ë°”ë¥¸ ì˜ˆ:**
```javascript
/**
 * @swagger
 * /api/new-endpoint:
 *   post:
 *     summary: ìƒˆ ì—”ë“œí¬ì¸íŠ¸
 *     ...
 */
router.post('/new-endpoint', controller.newMethod);
```

### âŒ ì‹¤ìˆ˜ 2: ì˜ëª»ëœ ìŠ¤í‚¤ë§ˆ êµ¬ì¡°
```yaml
# ì˜ëª»ëœ ì˜ˆ: íƒ€ì… ë¶ˆì¼ì¹˜
gameCount:
  type: string  # ì‹¤ì œë¡œëŠ” ìˆ«ìì¸ë° ë¬¸ìì—´ë¡œ ì •ì˜
```

### âŒ ì‹¤ìˆ˜ 3: ì‘ë‹µ ì½”ë“œ ëˆ„ë½
```yaml
# ì˜ëª»ëœ ì˜ˆ: 200ë§Œ ì •ì˜í•˜ê³  ì—ëŸ¬ ì¼€ì´ìŠ¤ ëˆ„ë½
responses:
  200:
    description: ì„±ê³µ
  # 401, 400 ë“± ì—ëŸ¬ ì¼€ì´ìŠ¤ ëˆ„ë½
```

## ğŸ¯ Swagger ë¬¸ì„œ í’ˆì§ˆ í™•ì¸

### âœ… ì¢‹ì€ Swagger ë¬¸ì„œì˜ íŠ¹ì§•
1. **ì™„ì „ì„±**: ëª¨ë“  í•„ë“œê°€ ì •ì˜ë¨
2. **ì •í™•ì„±**: ì‹¤ì œ APIì™€ ë¬¸ì„œê°€ ì¼ì¹˜
3. **ì˜ˆì‹œ**: example ê°’ì´ í¬í•¨ë¨
4. **ì„¤ëª…**: descriptionì´ ëª…í™•í•¨
5. **ì—ëŸ¬ ì²˜ë¦¬**: ëª¨ë“  ì—ëŸ¬ ì¼€ì´ìŠ¤ í¬í•¨

### âœ… ë¬¸ì„œ í’ˆì§ˆ ì²´í¬ ëª…ë ¹ì–´
```bash
# API ë¬¸ì„œ ì™„ì„±ë„ í™•ì¸
curl -s http://localhost:3350/openapi.json | jq '
  .paths | 
  to_entries | 
  map({
    path: .key, 
    methods: .value | keys,
    has_docs: (.value | values | map(has("summary")) | any)
  })
'
```

---

**ğŸ’¡ í•µì‹¬: ì½”ë“œ ë³€ê²½ê³¼ ë¬¸ì„œ ì—…ë°ì´íŠ¸ëŠ” í•­ìƒ í•¨ê»˜! API ë¬¸ì„œëŠ” ê°œë°œìì˜ ì–¼êµ´ì…ë‹ˆë‹¤.**
